<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>
        let users =[
            {id:1, name:'ID', age:36},
            {id:2, name:'AA', age:32},
            {id:3, name:'BJ', age:30},
            {id:4, name:'ZZ', age:29},
            {id:5, name:'OO', age:28},
            {id:6, name:'MO', age:27},
        ];


        //1. 명령형 코드 
        //1.1 30세 이상인 user를 거른다. 
        let tempUsers = [];
        for(let i=0; i <users.length; i++){
            if(users[i].age >= 30)
                tempUsers.push(users[i]);
        }

        console.log(tempUsers);

        //2. _filter, _map으로 리팩토링

        function _filter(list, predi){
            let new_list = [];
            for (let i=0 ; i<list.length;i++){
                if(predi(list[i])){ //predi함수로 통해 '평가'를 한다.
                    new_list.push(list[i]);
                }
            }
            return new_list;
        }

        console.log(
            _filter(users, function(users){
                return users.age >= 30;
            })
        )

        console.log(
            _filter([1,2,3,4], function(num){
                return num % 2;
            })
        )

        function _map(list, mapper){
            let new_list = [];
            for(let i=0;i<list.length;i++){
                new_list.push(mapper(list[i]));
            }
            return new_list;
        }

        console.log(
            _map(users, function(user){
                return user.name;
            })
        )

        // filter 와 map의 조합 (함수형이기 때문에 가능하다.)

        console.log(
            _map( 
                _filter(users, function(users){ return users.age >= 30;}),
              function(user) {return user.name}
            )
        );
        


    </script>
</body>
</html>